{% extends 'base.html' %}

{% block title %}Notes{% endblock %}

{% block content %}
<h1 class="text-center my-5">Notes</h1>

<form method="POST" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="title" class="form-label">Title:</label>
        <input type="text" id="title" name="title" class="form-control" required>
    </div>
    <div class="mb-3">
        <label for="content" class="form-label">Content:</label>
        <textarea id="content" name="content" class="form-control" rows="5" required></textarea>
    </div>
    <div class="mb-3">
        <label for="files" class="form-label">Attach files (MP4, MP3, Images):</label>
        <input type="file" id="files" name="files" class="form-control" multiple>
    </div>
    <button type="submit" class="btn btn-primary">Save Note</button>
</form>

<h2 class="my-5">Your Notes</h2>
<ul class="list-group">
    {% for note in notes %}
    <li class="list-group-item">
        <h5>{{ note['title'] }}</h5>
        <p>{{ note['content'] }}</p>
        <a href="{{ url_for('download_note', note_id=note['id']) }}" class="btn btn-secondary">Download as .txt</a>
        {% if note['files'] %}
        <div class="mt-3">
            <h6>Attached Files:</h6>
            <ul>
                {% for file in note['files'].split(',') %}
                <li><a href="{{ url_for('static', filename=file.split('uploads/')[1]) }}" download>{{ file.split('uploads/')[1] }}</a></li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% endblock %}
